{% extends "layout.html" %}

{% block content %}
<div style="padding: 40px; max-width: 1000px; margin: 0 auto;">

    <a href="{{ url_for('admin.manage_users') }}" style="color: #666; text-decoration: none; display: inline-block; margin-bottom: 20px;">
        <i class="fa-solid fa-arrow-left"></i> Back to Users
    </a>

    <h1 style="margin-bottom: 30px; color: #333;">User Profile ğŸ‘¤</h1>

    <div style="background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); margin-bottom: 40px;">
        <div style="display: flex; gap: 50px; flex-wrap: wrap;">
            
            <div style="text-align: center;">
                <div style="width: 100px; height: 100px; background: #eee; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 15px; font-size: 40px; color: #888;">
                    <i class="fa-solid fa-user"></i>
                </div>
                <h3 style="margin: 0;">{{ user.username }}</h3>
                <span style="background: #e3f2fd; color: #1976d2; padding: 2px 10px; border-radius: 10px; font-size: 12px;">{{ user.role }}</span>
            </div>

            <div style="flex: 1; border-left: 1px solid #eee; padding-left: 30px;">
                <p><strong>Email:</strong> {{ user.email }}</p>
                <p><strong>Mobile:</strong> {{ user.mobile }}</p>
                
                {% if user.role == 'customer' %}
                    <p><strong>Address:</strong> {{ user.address }}</p>
                    <p><strong>Loyalty Points:</strong> <span style="color: goldenrod; font-weight: bold;">{{ user.loyalty_points }} â­</span></p>
                {% elif user.role == 'admin' %}
                    <p><strong>Department:</strong> {{ user.department }}</p>
                {% endif %}
            </div>
        </div>
    </div>

    <h3 style="margin-bottom: 20px; color: #555;">Order History ğŸ“¦</h3>
    
    {% if orders %}
    <div style="background: white; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); overflow: hidden;">
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background: #f8f9fa; text-align: left; color: #555;">
                    <th style="padding: 15px;">Order ID</th>
                    <th style="padding: 15px;">Date</th>
                    <th style="padding: 15px;">City</th>
                    <th style="padding: 15px;">Payment</th>
                    <th style="padding: 15px;">Total</th>
                    <th style="padding: 15px;">Status</th>
                </tr>
            </thead>
            <tbody>
                {% for order in orders %}
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 15px; font-weight: bold;">#{{ order.id }}</td>
                    <td style="padding: 15px; color: #777;">{{ order.date }}</td>
                    <td style="padding: 15px;">{{ order.city }}</td>
                    <td style="padding: 15px;">{{ order.payment }}</td>
                    <td style="padding: 15px; font-weight: bold; color: var(--primary-color);">${{ order.total }}</td>
                    <td style="padding: 15px;">
                        <span style="padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold;
                            background: {% if order.status == 'confirmed' %}#d4edda{% else %}#fff3cd{% endif %};
                            color: {% if order.status == 'confirmed' %}#155724{% else %}#856404{% endif %};">
                            {{ order.status }}
                        </span>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
        <p style="color: #888; font-style: italic;">This user hasn't placed any orders yet.</p>
    {% endif %}

</div>
{% endblock %}